var infoproducto = [
    
    [
        {
            nombre: "producto 1 - 0",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
        },
        {
            nombre: "producto 2 - 0",
            imagen: "/img/poleras/Jordan-Flight2.png",
            codigo: 1234567890,
            descripcion: " Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 3 - 0",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 4 - 0",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 5 - 0",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 6 - 0",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 7 - 0",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 8 - 0",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 9 - 0",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 897987987,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 10 - 0",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

    }],
    [
        {
            nombre: "producto 1 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
        },
        {
            nombre: "producto 2 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: " Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 1988712

        },
        {
            nombre: "producto 3 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 4 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887,
            

        },
        {
            nombre: "producto 5 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 13.23

        },
        {
            nombre: "producto 6 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 7 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 8 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 9 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 46849848641,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        },
        {
            nombre: "producto 10 - 1",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887

        }
    
    ],
    [
        {
            nombre: "producto 1 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
        },
        {
            nombre: "producto 2 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: " Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
    
        },
        {
            nombre: "producto 3 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
    
        },
        {
            nombre: "producto 4 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
    
        },
        {
            nombre: "producto 5 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
    
        },
        {
            nombre: "producto 6 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
    
        },
        {
            nombre: "producto 7 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
    
        },
        {
            nombre: "producto 8 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567890,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
    
        },
        {
            nombre: "producto 9 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1986464654,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
    
        },
        {
            nombre: "producto 10 - 2",
            imagen: "/img/poleras/Jordan-Flight.png",
            codigo: 1234567,
            descripcion: "Exercitationem corrupti molestiae consequuntur hic praesentium non dignissimos repellendus maiores sed ea.",
            precio: 9887
    
        }]
]



var divMedio;
var divInterno;
var footerCard;
var tituloCard;
var descripcionCard;
var labelcheck;
var boton;
var imgCard;
var selecCantidad;
var labelCantidad;
var i = 0;
var index;
var precio;
var codigo;
var linkImagen;
var arregloCard = [];

//Función creadora de cards
function creacionCards(element,index){
    //Creación de elementos html y asignación de atributos
    var objeto = {  nombre: undefined,
                    imagen: undefined,
                    codigo: undefined,
                    descripcion: undefined,
                    precio: undefined
                }
    
    
    
    divMedio = document.createElement("div");
    divMedio.className = "card col-4 gy-3 divMedio";
    divMedio.style = "object-fit: fit; border: none; max-width: 250px; min-width: 200px; background: rgba(0,0,0,0);  z-index: 1010";
    divMedio.id = "divMedio-" + i;

    divInterno = document.createElement("div");
    divInterno.className = "card-body card-img-overlay divInterno";
    divInterno.setAttribute("data-bs-toggle","modal");
    divInterno.setAttribute("data-bs-target","#detalleProducto") ;
    divInterno.id = "divInterno-" + i;
    
    imgCard = document.createElement("img");
    imgCard.className = "img-fluid card-img-top rounded-top imagenCard";
    imgCard.id = "img-" + i;
    imgCard.src= element[index].imagen;
    imgCard.alt  = "Imagen no Disponible";
    imgCard.style = "max-height: 300px; object-fit: fit";
    objeto.imagen = element[index].imagen; //asignación del los atributos al objeto que irá en el arreglo de productos mostrados en pantalla (arregloCard[])
    
    tituloCard = document.createElement("h4");
    tituloCard.className = "card-title ps-2";
    tituloCard.textContent = element[index].nombre;
    
    objeto.nombre = element[index].nombre; 

    objeto.descripcion = element[index].descripcion;

    precio = document.createElement("h2");
    precio.className = "card-text ps-2 ";
    precio.textContent = new Intl.NumberFormat('es-CL', {currency: 'CLP', style: 'currency'}).format(element[index].precio);
    precio.id = "precio-" + i;
    objeto.precio = element[index].precio;

    codigo = document.createElement("p");
    codigo.className = "card-text ps-2";
    codigo.textContent = "COD: " + element[index].codigo;
    codigo.id = "codigo-" + i;
    objeto.codigo = element[index].codigo;

    footerCard = document.createElement("div");
    footerCard.className = "card  pb-3";
    
    divAgregar = document.createElement("div");
    divAgregar.style = "display: flex; justify-content: space-around";
    divAgregar.className = "p-2";

    divCantidad = document.createElement("div");
    divCantidad.className = "ps-2";
    divCantidad.style = "justify-content: space-evenly; display: flex;"

    boton = document.createElement("button");
    boton.type = "button";
    boton.id = "boton-" + i;
    boton.className = "btn bg-primary";
    boton.textContent = "Añadir al Carro";

    
    
    selecCantidad = document.createElement("input");
    selecCantidad.id = "cantidad"
    selecCantidad.type = "number";
    selecCantidad.min = 1;
    selecCantidad.max = 15;
    selecCantidad.value = 1

    labelCantidad = document.createElement("label");
    labelCantidad.for = "cantidad-" + i;
    labelCantidad.textContent = "Cantidad:";

    //Anidar y agregar los elementos al DOM
    $("#contenedorCard").append(divMedio);
    divMedio.append(divInterno);
    divMedio.append(imgCard);
    divMedio.append(footerCard);
    footerCard.append(tituloCard);
    footerCard.append(codigo);
    footerCard.append(precio);
    divAgregar.append(boton);
    divCantidad.append(labelCantidad);
    divCantidad.append(selecCantidad);
    footerCard.append(divCantidad);
    footerCard.append(divAgregar);
    
    arregloCard.push(objeto);

    i++;
}


if($("#mainIndex").val() =="1"){ //solo en el index generará 5 cards, en el resto generará 10
    for (let i = 0; i < 5; i++) {
        var random1 = Math.floor(Math.random() * infoproducto.length);
        var random2;
        var arregloRandom = []
        while(arregloRandom.length < infoproducto[random1].length ){
            var random2 = Math.ceil(Math.random()* infoproducto[random1].length);
            var existe = false;
            for(var a=0;a<arregloRandom.length;a++){
                if(arregloRandom[i] == random2){
                    existe = true;
                    break;
                }
            }
            if(!existe){
                arregloRandom[arregloRandom.length] = infoproducto[random1].length;
            }
    
        }
        var arreglo = infoproducto[random1];

        creacionCards(arreglo,random2);
        
        
        
    }
    
}else{
    for (let i = 0; i < 10; i++) {
        var random1 = Math.floor(Math.random() * infoproducto.length);
        var random2;
        var arregloRandom = []
        while(arregloRandom.length < infoproducto[random1].length ){ 
            var random2 = Math.ceil(Math.random()* infoproducto[random1].length);
            var existe = false;
            for(var a=0;a<arregloRandom.length;a++){
                if(arregloRandom[i] == random2){
                    existe = true;
                    break;
                }
            }
            if(!existe){
                arregloRandom[arregloRandom.length] = infoproducto[random1].length;
            }
    
        }
       
        var arreglo = infoproducto[random1];
        creacionCards(arreglo,random2);
    }
}


$(".divMedio").on("click",function(){

    var indiceProducto =($(this).attr('id'))[($(this).attr('id')).length -1];

    $("#tituloModal").text(arregloCard[parseInt(indiceProducto)].nombre);
    $("#codigoModal").text("COD: " + arregloCard[parseInt(indiceProducto)].codigo);
    $("#imagenModal").attr("src", arregloCard[indiceProducto].imagen);
    $("#descripcionModal").text(arregloCard[indiceProducto].descripcion);
    $("#precioModal").text(new Intl.NumberFormat('es-CL', {currency: 'CLP', style: 'currency'}).format(arregloCard[indiceProducto].precio));

})


   

